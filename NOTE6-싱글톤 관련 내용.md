# 싱글톤 관련 내용

## 싱글톤 패턴
* TPS(Transaction Per Second)가 5만이고, AppConfig을 스프링 컨테이너 없이 그냥 쓴다면 초당 5만개의 객체가 생성될 것임. -> 비효율적
* 그렇다고 직접 싱글톤을 적용한다면?
  * 구현하는 코드 자체가 많이 들어감
  * 싱글톤에서 instance 얻으려면 구체클래스에 의존해야 하므로 DIP 위반이고 OCP도 위반 가능성 높음
  * 테스트 어려움
  * 내부 속성을 변경하거나 초기화 하기 어려움
  * private 생성자를 사용하므로 자식 클래스 생성 불가능 -> 확장성 떨어짐

## 스프링 컨테이너(싱글톤 컨테이너)
* 기본적으로 객체 인스턴스를 싱글톤으로 관리함
* 싱글톤 레지스트리 : 싱글톤 객체를 생성하고 관리하는 기능
* 싱글턴 패턴의 모든단점을 해결하면서 객체를 싱글톤으로 유지 가능
  * 싱글톤 패턴을 위한 추가 코드가 안들어가도 됨
  * DIP, OCP, 테스트, private 생성자로부터 자유롭게 싱글톤으로 사용 가능.
* 요청할 때 마다 새로운 객체를 생성해서 반환하는 기능도 제공함.

## 싱글톤 주의점
* stateless 여야함
  * 필요하다면 필드 대신에 자바에서 공유되지 않는 지역변수, 파라미터, ThreadLocal 등을 사용해야함
* 

